<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>34. VFUNCTION Namelist &mdash; Truchas Reference Manual 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script>window.MathJax = {"chtml": {"displayAlign": "left", "displayIndent": "2em"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="35. VISCOPLASTIC_MODEL Namelist" href="../VISCOPLASTIC_MODEL_Namelist/index.html" />
    <link rel="prev" title="33. TURBULENCE Namelist" href="../TURBULENCE_Namelist/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Truchas Reference Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ALTMESH_Namelist/index.html">2. ALTMESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BODY_Namelist/index.html">3. BODY Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DIFFUSION_Solver_Namelist/index.html">4. DIFFUSION Solver Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DS_SOURCE_Namelist/index.html">5. DS_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ELECTROMAGNETICS_Namelist/index.html">6. ELECTROMAGNETICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_RADIATION_Namelist/index.html">7. ENCLOSURE_RADIATION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_SURFACE_Namelist/index.html">8. ENCLOSURE_SURFACE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EVAPORATION_Namelist/index.html">9. EVAPORATION Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_Namelist/index.html">10. FLOW Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_BC_Namelist/index.html">11. FLOW_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_PRESSURE_SOLVER_and_FLOW_VISCOUS_SOLVER_Namelists/index.html">12. FLOW_PRESSURE_SOLVER and FLOW_VISCOUS_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FUNCTION_Namelist/index.html">13. FUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../INDUCTION_COIL_Namelist/index.html">14. INDUCTION_COIL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MATERIAL_and_PHASE_Namelists/index.html">15. MATERIAL and PHASE Namelists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MESH_Namelist/index.html">16. MESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MICROSTRUCTURE_Namelist/index.html">17. MICROSTRUCTURE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NUMERICS_Namelist/index.html">18. NUMERICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OUTPUTS_Namelist/index.html">19. OUTPUTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHASE_CHANGE_Namelist/index.html">20. PHASE_CHANGE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICAL_CONSTANTS_Namelist/index.html">21. PHYSICAL_CONSTANTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICS_Namelist/index.html">22. PHYSICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PROBE_Namelist/index.html">23. PROBE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RESTART_Namelist/index.html">24. RESTART Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SIMULATION_CONTROL_Namelist/index.html">25. SIMULATION_CONTROL Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_Namelist/index.html">26. SOLID_MECHANICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_BC_Namelist/index.html">27. SOLID_MECHANICS_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SPECIES_BC_Namelist/index.html">28. SPECIES_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_BC_Namelist/index.html">29. THERMAL_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_SOURCE_Namelist/index.html">30. THERMAL_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLHEAD_Namelist/index.html">31. TOOLHEAD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLPATH_Namelist/index.html">32. TOOLPATH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TURBULENCE_Namelist/index.html">33. TURBULENCE Namelist</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">34. VFUNCTION Namelist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#namelist-variables">34.1. Namelist Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#name">name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type">type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tabular-data">tabular_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tabular-dim">tabular_dim</a></li>
<li class="toctree-l3"><a class="reference internal" href="#toolhead">toolhead</a></li>
<li class="toctree-l3"><a class="reference internal" href="#library-path">library_path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#library-symbol">library_symbol</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dim">dim</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VISCOPLASTIC_MODEL_Namelist/index.html">35. VISCOPLASTIC_MODEL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rade/index.html">36. Radiation Enclosure Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">37. <code class="docutils literal notranslate"><span class="pre">truchas</span></code> Python Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Truchas Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">34. </span>VFUNCTION Namelist</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/VFUNCTION_Namelist/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vfunction-namelist">
<span id="id1"></span><h1><span class="section-number">34. </span>VFUNCTION Namelist<a class="headerlink" href="#vfunction-namelist" title="Permalink to this heading"></a></h1>
<p>Similar to the <a class="reference internal" href="../FUNCTION_Namelist/index.html#function-namelist"><span class="std std-ref">FUNCTION</span></a> namelist, the VFUNCTION
namelist is used to define a vector-valued function that can be used in some
situations where vector-valued data is needed, such as the specification of
the boundary velocity in a flow boundary condition.</p>
<p>These are general vector-valued functions of one or more variables,
<span class="math notranslate nohighlight">\(\mathbf{y} = (y_1,\ldots,y_m) = f(x_1,\ldots,x_n)\)</span>. The dimension of the value,
the number of variables, and the unknowns they represent (i.e., time,
position, temperature, etc.) all depend on the context in which the
function is used, and that is described in the documentation of those
namelists where these functions can be used.</p>
<p>The following function types are available.</p>
<ul class="simple">
<li><p><strong>Tabular Function.</strong> This is a continuous, single-variable function
<span class="math notranslate nohighlight">\(y=f(s)\)</span> linearly interpolated from a sequence of data points
<span class="math notranslate nohighlight">\((s_i,\mathbf{y}_i), i= 1,\ldots,p\)</span>, with <span class="math notranslate nohighlight">\(s_i \lt s_{i+1}\)</span>.
The variable <span class="math notranslate nohighlight">\(x_d\)</span> that is identified with <span class="math notranslate nohighlight">\(s\)</span> is specified
by <a class="reference internal" href="#tabular-dim">tabular_dim</a>.</p></li>
<li><p><strong>Laser Irradiance Function.</strong> This special-use type defines an alias to
a laser irradiance function defined by a <a class="reference internal" href="../TOOLHEAD_Namelist/index.html#toolhead-namelist"><span class="std std-ref">TOOLHEAD</span></a>
namelist, which can be used by certain thermal boundary condition and
source models.</p></li>
<li><p><strong>Shared Library Function</strong> This is a function from a shared object library
having a simple Fortran 77 or C compatible interface. Written in Fortran 77
the function interface must look like</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">subroutine</span> <span class="pre">myfun</span> <span class="pre">(v,</span> <span class="pre">p,</span> <span class="pre">r)</span> <span class="pre">bind(c)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">precision</span> <span class="pre">v(*),</span> <span class="pre">p(*),</span> <span class="pre">r(*)</span></code></p>
<p>where <strong>myfunc</strong> can, of course, be any name. The equivalent C interface is</p>
<p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">myfun</span> <span class="pre">(double</span> <span class="pre">v[],</span> <span class="pre">double</span> <span class="pre">p[],</span> <span class="pre">double</span> <span class="pre">r[]);</span></code></p>
<p>The vector of variables <span class="math notranslate nohighlight">\(v= (v_1,...,v_m)\)</span> is passed in the argument
<span class="math notranslate nohighlight">\(v\)</span> and a vector of parameter values specified by <a class="reference internal" href="#parameters">parameters</a> is
passed in the argument <span class="math notranslate nohighlight">\(p\)</span>. The vector of variables
<span class="math notranslate nohighlight">\(r=(r_1,...,r_d)\)</span> of dimension <a class="reference internal" href="#dim">dim</a> is returned. The path to the
library is given by <a class="reference internal" href="#library-path">library_path</a> and the name of the function (myfun,
e.g.) is given by <a class="reference internal" href="#library-symbol">library_symbol</a>. Note that the bind(c) attribute on the
function declaration inhibits the Fortran compiler from mangling the function
name (by appending an underscore, for example) as it normally would.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="field-list simple">
<dt class="field-odd">Required/Optional<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional</p>
</dd>
<dt class="field-even">Single/Multiple Instances<span class="colon">:</span></dt>
<dd class="field-even"><p>Multiple</p>
</dd>
</dl>
</div>
<section id="namelist-variables">
<h2><span class="section-number">34.1. </span>Namelist Variables<a class="headerlink" href="#namelist-variables" title="Permalink to this heading"></a></h2>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#name" id="id2">name</a></p></li>
<li><p><a class="reference internal" href="#type" id="id3">type</a></p></li>
<li><p><a class="reference internal" href="#tabular-data" id="id4">tabular_data</a></p></li>
<li><p><a class="reference internal" href="#tabular-dim" id="id5">tabular_dim</a></p></li>
<li><p><a class="reference internal" href="#toolhead" id="id6">toolhead</a></p></li>
<li><p><a class="reference internal" href="#library-path" id="id7">library_path</a></p></li>
<li><p><a class="reference internal" href="#library-symbol" id="id8">library_symbol</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id9">parameters</a></p></li>
<li><p><a class="reference internal" href="#dim" id="id10">dim</a></p></li>
</ul>
</nav>
<section id="name">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">name</a><a class="headerlink" href="#name" title="Permalink to this heading"></a></h3>
<p>A unique name by which this vector function can be referenced by other
namelists.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>case-sensitive string (31 characters max)</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</section>
<section id="type">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">type</a><a class="headerlink" href="#type" title="Permalink to this heading"></a></h3>
<p>The type of function defined by the namelist.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>case-sensitive string</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
<dt class="field-odd">Valid values<span class="colon">:</span></dt>
<dd class="field-odd"><p>“tabular”, “toolhead-laser”, “library”</p>
</dd>
</dl>
</section>
<section id="tabular-data">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">tabular_data</a><a class="headerlink" href="#tabular-data" title="Permalink to this heading"></a></h3>
<p>The table of p data points <span class="math notranslate nohighlight">\((s_i,\mathbf{y}_i)\)</span> defining a tabular function
<span class="math notranslate nohighlight">\(\mathbf{y}=f(s)\)</span>. Use <a class="reference internal" href="#tabular-dim">tabular_dim</a> to set the independent variable
component identified with <span class="math notranslate nohighlight">\(s\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>real array</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This 1+m by p array is most easily specified point by point in this manner:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="code highlight fortran docutils literal highlight-fortran"><span class="n">tabular_data</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span></code> <span class="math notranslate nohighlight">\(s_1, y_{11}, \ldots, y_{m1}\)</span></div>
<div class="line"><code class="code highlight fortran docutils literal highlight-fortran"><span class="n">tabular_data</span><span class="p">(:,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span></code> <span class="math notranslate nohighlight">\(s_2, y_{12}, \ldots, y_{m2}\)</span></div>
<div class="line">…</div>
<div class="line"><code class="code highlight fortran docutils literal highlight-fortran"><span class="n">tabular_data</span><span class="p">(:,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">=</span></code> <span class="math notranslate nohighlight">\(s_p, y_{1p}, \ldots, y_{mp}\)</span></div>
</div>
</div></blockquote>
</div>
</section>
<section id="tabular-dim">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">tabular_dim</a><a class="headerlink" href="#tabular-dim" title="Permalink to this heading"></a></h3>
<p>The dimension in the <span class="math notranslate nohighlight">\(n\)</span>-vector of independent variables that serves
as the independent variable for the single-variable tabular function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>1</p>
</dd>
</dl>
</section>
<section id="toolhead">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">toolhead</a><a class="headerlink" href="#toolhead" title="Permalink to this heading"></a></h3>
<p>The name of the <a class="reference internal" href="../TOOLHEAD_Namelist/index.html#toolhead-namelist"><span class="std std-ref">TOOLHEAD</span></a> namelist that defines the
laser irradiance function that will be identified with this function. This is
a 3-vector valued function that depends on the variables <span class="math notranslate nohighlight">\((t, x, y, z)\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>case sensitive string</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</section>
<section id="library-path">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">library_path</a><a class="headerlink" href="#library-path" title="Permalink to this heading"></a></h3>
<p>The path to the shared object library that contains the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string of up to 128 characters.</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</section>
<section id="library-symbol">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">library_symbol</a><a class="headerlink" href="#library-symbol" title="Permalink to this heading"></a></h3>
<p>The symbol name of the function within the shared object file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string of up to 128 characters.</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
<dt class="field-odd">Notes<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unless the Fortran function is declared with the BIND(C) attribute, which is the recommended practice, a Fortran compiler will almost always mangle the name of the function so that the symbol name is not quite the same as the name in the source code. Use the UNIX/Linux command-line utility <strong>nm</strong> to list the symbol names in the library file to determine the correct name to use here.</p>
</dd>
</dl>
</section>
<section id="parameters">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h3>
<p>Optional parameter values to pass to the shared library function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>real vector of up to 16 values</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</section>
<section id="dim">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">dim</a><a class="headerlink" href="#dim" title="Permalink to this heading"></a></h3>
<p>Number of components of the return value of the shared library function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../TURBULENCE_Namelist/index.html" class="btn btn-neutral float-left" title="33. TURBULENCE Namelist" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../VISCOPLASTIC_MODEL_Namelist/index.html" class="btn btn-neutral float-right" title="35. VISCOPLASTIC_MODEL Namelist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, The Truchas Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>