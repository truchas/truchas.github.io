

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>20. MICROSTRUCTURE Namelist &mdash; Truchas Reference Manual 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=93b25530" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>window.MathJax = {"chtml": {"displayAlign": "left", "displayIndent": "2em"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="21. MICROWAVE_HEATING Namelist" href="../microwave_heating_namelist.html" />
    <link rel="prev" title="19. MESH Namelist" href="../MESH_Namelist/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Truchas Reference Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BODY_Namelist/index.html">2. BODY Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex_function_namelist.html">3. COMPLEX_FUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex_vfunction_namelist.html">4. COMPLEX_VFUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DIFFUSION_Solver_Namelist/index.html">5. DIFFUSION Solver Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ELECTROMAGNETIC_BC_Namelist/index.html">6. ELECTROMAGNETIC_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EM_MESH_Namelist/index.html">7. EM_MESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_RADIATION_Namelist/index.html">8. ENCLOSURE_RADIATION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_SURFACE_Namelist/index.html">9. ENCLOSURE_SURFACE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EVAPORATION_Namelist/index.html">10. EVAPORATION Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fdme_solver_namelist.html">11. FDME_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_Namelist/index.html">12. FLOW Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_BC_Namelist/index.html">13. FLOW_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_PRESSURE_SOLVER_and_FLOW_VISCOUS_SOLVER_Namelists/index.html">14. FLOW_PRESSURE_SOLVER and FLOW_VISCOUS_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FUNCTION_Namelist/index.html">15. FUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../induction_heating_namelist.html">16. INDUCTION_HEATING Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../INDUCTION_SOURCE_FIELD_Namelist/index.html">17. INDUCTION_SOURCE_FIELD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MATERIAL_and_PHASE_Namelists/index.html">18. MATERIAL and PHASE Namelists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MESH_Namelist/index.html">19. MESH Namelist</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">20. MICROSTRUCTURE Namelist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#common-namelist-variables">20.1. Common Namelist Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-gl-analysis-module">20.2. Basic GL Analysis Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#namelist-variables-for-the-temperature-based-method">Namelist Variables for the Temperature Based Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namelist-variables-for-the-solid-fraction-based-method">Namelist Variables for the Solid Fraction Based Method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-microstructure-analysis-modules">20.3. Custom Microstructure Analysis Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../microwave_heating_namelist.html">21. MICROWAVE_HEATING Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NUMERICS_Namelist/index.html">22. NUMERICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OUTPUTS_Namelist/index.html">23. OUTPUTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHASE_CHANGE_Namelist/index.html">24. PHASE_CHANGE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICAL_CONSTANTS_Namelist/index.html">25. PHYSICAL_CONSTANTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICS_Namelist/index.html">26. PHYSICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PROBE_Namelist/index.html">27. PROBE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RESTART_Namelist/index.html">28. RESTART Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SIMULATION_CONTROL_Namelist/index.html">29. SIMULATION_CONTROL Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_Namelist/index.html">30. SOLID_MECHANICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_BC_Namelist/index.html">31. SOLID_MECHANICS_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SPECIES_BC_Namelist/index.html">32. SPECIES_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SPECIES_SOURCE_Namelist/index.html">33. SPECIES_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tdme_joule_solver_namelist.html">34. TDME_JOULE_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_BC_Namelist/index.html">35. THERMAL_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_SOURCE_Namelist/index.html">36. THERMAL_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLHEAD_Namelist/index.html">37. TOOLHEAD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLPATH_Namelist/index.html">38. TOOLPATH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TURBULENCE_Namelist/index.html">39. TURBULENCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VFUNCTION_Namelist/index.html">40. VFUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VISCOPLASTIC_MODEL_Namelist/index.html">41. VISCOPLASTIC_MODEL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VISCOPLASTIC_SOLVER_Namelist/index.html">42. VISCOPLASTIC_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rade/index.html">43. Radiation Enclosure Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">44. <code class="docutils literal notranslate"><span class="pre">truchas</span></code> Python Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Truchas Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">20. </span>MICROSTRUCTURE Namelist</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/MICROSTRUCTURE_Namelist/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="microstructure-namelist">
<span id="id1"></span><h1><span class="section-number">20. </span>MICROSTRUCTURE Namelist<a class="headerlink" href="#microstructure-namelist" title="Link to this heading"></a></h1>
<p>Truchas is able to capture and analyze data about a solidification process
as it evolves within each mesh cell, and output the results for later analysis.
This data is generally used by analytic 0-dimensional models to predict the
local microstructural characteristics and defects of the solidified material.
This capability is described in terms of the usual liquid-solid transformation
but can be used for other transformation processes (e.g., solid-solid). Use
the MICROSTRUCTURE namelist to enable this feature and set the parameters that
control it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="field-list simple">
<dt class="field-odd">Required/Optional<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional</p>
</dd>
<dt class="field-even">Single/Multiple Instances<span class="colon">:</span></dt>
<dd class="field-even"><p>Multiple</p>
</dd>
</dl>
</div>
<section id="common-namelist-variables">
<h2><span class="section-number">20.1. </span>Common Namelist Variables<a class="headerlink" href="#common-namelist-variables" title="Link to this heading"></a></h2>
<p>The following variables are common to all analysis modules.</p>
<p><strong>low_temp_phase</strong></p>
<blockquote>
<div><p>The name of the low-temperature phase (e.g., solid) of the transformation
for which data will be collected. This is optional. When defined, the
fraction of low temperature phase will be made available to the analysis
module for use.</p>
</div></blockquote>
<p><strong>cell_set_ids</strong></p>
<blockquote>
<div><p>A list of cell set IDs that specify the part of the domain where data
will be collected. Cell-based data is output for the entire mesh, using
dummy values for cells that are not included in the analysis and
included cells without valid data. If not defined, all cell sets are
assumed.</p>
</div></blockquote>
</section>
<section id="basic-gl-analysis-module">
<h2><span class="section-number">20.2. </span>Basic GL Analysis Module<a class="headerlink" href="#basic-gl-analysis-module" title="Link to this heading"></a></h2>
<p>By default, the thermal gradient <span class="math notranslate nohighlight">\(G=\nabla T\)</span> and cooling rate
<span class="math notranslate nohighlight">\(L=-\partial T/\partial t\)</span> are recorded at the onset of solidification,
and the local solidification time (time spent in the mushy zone) is recorded
at the completion of solidification. These are written to the output file as
the cell-based fields “ustruc-G”, “ustruc-L”, and “ustruc-t_sol”, respectively.
A dummy value of 0 is written for cells not included in the analysis and cells
without valid GL or solidification time data.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Many, if not most, analytic models for microstructure and defect prediction
can be defined in terms of the fundamental G, L, and solidification time
data produced by this basic analysis module. These models can be easily
computed and visualized within Paraview using its calculator tool. For
example, the (vector) solidification front velocity is
<span class="math notranslate nohighlight">\(V = (L/\Vert{G}\Vert^2)G\)</span>, and the solidification
front speed is <span class="math notranslate nohighlight">\(\Vert{V}\Vert = L / \Vert{G}\Vert\)</span>.</p>
</div>
<p>There are two methods of specifying the parameters that control how the
data is collected, which are pictured below: one based on the fraction of
the low-temperature phase and the other based on temperature. They are
mutually exclusive. The phase fraction method requires <strong>low_temp_phase</strong>
to be defined. The collection procedure is designed to only report data for
those cells that have ultimately passed monotically from liquid to solid
(or are in the process of doing so). Thus some cells included in the analysis
may report invalid data even after all solidification is complete.</p>
<blockquote>
<div><figure class="align-left">
<a class="reference internal image-reference" href="../_images/fig.png"><img alt="../_images/fig.png" src="../_images/fig.png" style="width: 600px;" />
</a>
</figure>
</div></blockquote>
<section id="namelist-variables-for-the-temperature-based-method">
<h3>Namelist Variables for the Temperature Based Method<a class="headerlink" href="#namelist-variables-for-the-temperature-based-method" title="Link to this heading"></a></h3>
<p><strong>begin_temp</strong></p>
<blockquote>
<div><p>Solidification is regarded as having started when the temperature first
falls below this threshold; it need not be the actual liquidus temperature.
This is a required variable.</p>
</div></blockquote>
<p><strong>end_temp</strong></p>
<blockquote>
<div><p>Solidification is regarded as complete when the temperature first drops
below this threshold; it need not be the actual solidus temperature.
This is a required variable.</p>
</div></blockquote>
<p><strong>gl_temp</strong></p>
<blockquote>
<div><p>When the temperature first falls below this threshold, G and L are set
to the current value of the thermal gradient and cooling rate. The value
must belong to the interval [begin_temp, end_temp). This is an optional
variable; its value defaults to the value of begin_temp.</p>
</div></blockquote>
<p><strong>begin_temp_reset</strong></p>
<blockquote>
<div><p>If the temperature rises back above this threshold while solidifying, it
is regarded as having returned to a liquid state and any G and L data that
may have been computed is erased. This is an optional variable; its value
defaults to the value of begin_temp, and if specified it must be greater
than or equal to that value.</p>
</div></blockquote>
<p><strong>end_temp_reset</strong></p>
<blockquote>
<div><p>If the temperature rises back above this threshold after becoming solid,
it is regarded as having (partially) re-melted, and the previously computed
G, L, and solidification time are erased. This is an optional variable;
its value defaults to the value of end_temp, and if specified it must be
greater than or equal to that value.</p>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This option can be used to capture temperature GL data for <em>any</em> cooling
process, and not just those associated with an explicitly modeled phase
transformation.</p>
</div>
</section>
<section id="namelist-variables-for-the-solid-fraction-based-method">
<h3>Namelist Variables for the Solid Fraction Based Method<a class="headerlink" href="#namelist-variables-for-the-solid-fraction-based-method" title="Link to this heading"></a></h3>
<p><strong>begin_frac</strong></p>
<blockquote>
<div><p>Solidification is regarded as having started when the solid fraction first
rises above this threshold. This is a required variable; its value must
belong to the interval (0,1).</p>
</div></blockquote>
<p><strong>end_frac</strong></p>
<blockquote>
<div><p>Solidification is regarded as complete when the solid fraction first rises
above this threshold. This is a required variable; its value must belong
to the interval (begin_frac, 1).</p>
</div></blockquote>
<p><strong>gl_frac</strong></p>
<blockquote>
<div><p>When the solid fraction first rises above this threshold, G and L are
set to the current value of the thermal gradient and cooling rate. The
value must belong to the interval [begin_frac, end_frac). This is an
optional variable; its value defaults to the value of begin_frac.</p>
</div></blockquote>
<p><strong>begin_frac_reset</strong></p>
<blockquote>
<div><p>If the solid fraction falls back below this threshold while solidifying
it is regarded as having returned to a liquid state and any G and L data
that may have been computed is erased. This is an optional variable; its
value defaults to the value of begin_frac, and if specified it must belong
to the interval (0, begin_frac].</p>
</div></blockquote>
<p><strong>end_frac_reset</strong></p>
<blockquote>
<div><p>If the solid fraction falls back below this threshold after becoming solid,
it is regarded as having (partially) re-melted, and the previously computed
G, L, and solidification time are erased. This is an optional variable; its
value defaults to the value of end_frac, and if specified it must belong to
the interval [begin_frac, end_frac].</p>
</div></blockquote>
</section>
</section>
<section id="custom-microstructure-analysis-modules">
<h2><span class="section-number">20.3. </span>Custom Microstructure Analysis Modules<a class="headerlink" href="#custom-microstructure-analysis-modules" title="Link to this heading"></a></h2>
<p>The Truchas microstructure analysis framework is designed to readily accept
additional user-written analysis modules. Contact the Truchas developers for
details and refer to the template file located in the <cite>src/truchas/ustruc</cite>
directory.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../MESH_Namelist/index.html" class="btn btn-neutral float-left" title="19. MESH Namelist" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../microwave_heating_namelist.html" class="btn btn-neutral float-right" title="21. MICROWAVE_HEATING Namelist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, The Truchas Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>