<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Introduction &mdash; Truchas Reference Manual 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. ALTMESH Namelist" href="../ALTMESH_Namelist/index.html" />
    <link rel="prev" title="Reference Manual" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Truchas Reference Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#invoking-truchas">1.1. Invoking Truchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stopping-truchas">1.2. Stopping Truchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-file-format">1.3. Input File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#physical-units">1.4. Physical Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-output-files">1.5. Working With Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#visualization">Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restarts">Restarts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ALTMESH_Namelist/index.html">2. ALTMESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BODY_Namelist/index.html">3. BODY Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DIFFUSION_Solver_Namelist/index.html">4. DIFFUSION Solver Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DS_SOURCE_Namelist/index.html">5. DS_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ELECTROMAGNETICS_Namelist/index.html">6. ELECTROMAGNETICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_RADIATION_Namelist/index.html">7. ENCLOSURE_RADIATION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ENCLOSURE_SURFACE_Namelist/index.html">8. ENCLOSURE_SURFACE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EVAPORATION_Namelist/index.html">9. EVAPORATION Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_Namelist/index.html">10. FLOW Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_BC_Namelist/index.html">11. FLOW_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FLOW_PRESSURE_SOLVER_and_FLOW_VISCOUS_SOLVER_Namelists/index.html">12. FLOW_PRESSURE_SOLVER and FLOW_VISCOUS_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FUNCTION_Namelist/index.html">13. FUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../INDUCTION_COIL_Namelist/index.html">14. INDUCTION_COIL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MATERIAL_and_PHASE_Namelists/index.html">15. MATERIAL and PHASE Namelists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MESH_Namelist/index.html">16. MESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MICROSTRUCTURE_Namelist/index.html">17. MICROSTRUCTURE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NUMERICS_Namelist/index.html">18. NUMERICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OUTPUTS_Namelist/index.html">19. OUTPUTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHASE_CHANGE_Namelist/index.html">20. PHASE_CHANGE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICAL_CONSTANTS_Namelist/index.html">21. PHYSICAL_CONSTANTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PHYSICS_Namelist/index.html">22. PHYSICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PROBE_Namelist/index.html">23. PROBE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RESTART_Namelist/index.html">24. RESTART Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SIMULATION_CONTROL_Namelist/index.html">25. SIMULATION_CONTROL Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_Namelist/index.html">26. SOLID_MECHANICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SOLID_MECHANICS_BC_Namelist/index.html">27. SOLID_MECHANICS_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SPECIES_BC_Namelist/index.html">28. SPECIES_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_BC_Namelist/index.html">29. THERMAL_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../THERMAL_SOURCE_Namelist/index.html">30. THERMAL_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLHEAD_Namelist/index.html">31. TOOLHEAD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TOOLPATH_Namelist/index.html">32. TOOLPATH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TURBULENCE_Namelist/index.html">33. TURBULENCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VFUNCTION_Namelist/index.html">34. VFUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VISCOPLASTIC_MODEL_Namelist/index.html">35. VISCOPLASTIC_MODEL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rade/index.html">36. Radiation Enclosure Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">37. <code class="docutils literal notranslate"><span class="pre">truchas</span></code> Python Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Truchas Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">1. </span>Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/introduction/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="toctree-wrapper compound" id="um-introduction">
</div>
<section id="introduction">
<h1><span class="section-number">1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h1>
<section id="invoking-truchas">
<h2><span class="section-number">1.1. </span>Invoking Truchas<a class="headerlink" href="#invoking-truchas" title="Permalink to this heading"></a></h2>
<p>Truchas is executed in serial using a command of the form</p>
<blockquote>
<div><p>truchas [-h] [-v:<cite>n</cite>] [-o:<cite>outdir</cite>] [-r:<cite>rstfile</cite>] [-g:<cite>m</cite>] <cite>infile</cite></p>
</div></blockquote>
<p>assuming “truchas” is the name of the executable. The brackets denote optional
arguments that are described in <a class="reference internal" href="#truchas-command-line-option"><span class="std std-numref">Table 1.1.1</span></a>.
The only required argument is the path to the input file <cite>infile</cite>. This file
name must end with the extension “.inp”. The general format of the input file
is described in the next section, and the following chapters describe the
various Fortran namelists that go into the input file to describe the problem
to be simulated.</p>
<p>All of the output files are written to directory whose name is derived from the
base name of the input file. For example, if the input file is “myprob.inp”,
the output directory will be named “myprob_output”. The name of the output
directory can be overridden using the -o option. The directory will be created
if necessary.</p>
<p>The precise manner of executing Truchas in parallel depends on the MPI
implementation being used. This may be as simple as prefixing the serial
invocation above with “mpirun -np n”, where n is the number of processes.
But this varies widely and providing specific instructions is beyond the
scope of this document. There is no difference in the Truchas arguments
between serial and parallel, however.</p>
<span id="truchas-command-line-option"></span><table class="tight-table docutils align-default" id="id1">
<caption><span class="caption-number">Table 1.1.1 </span><span class="caption-text">Truchas Command Line Options</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Option</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p>-g:<cite>m</cite></p></td>
<td><p>Sets the number <cite>m</cite> of MPI ranks used for parallel output to the HDF5 output file. The default is 1, and must be no greater than the number of MPI ranks.</p></td>
</tr>
<tr class="row-odd"><td><p>-h</p></td>
<td><p>Print a usage summary of the command line options and exit.</p></td>
</tr>
<tr class="row-even"><td><p>-f</p></td>
<td><p>Force overwrite of output directory contents.</p></td>
</tr>
<tr class="row-odd"><td><p>-m</p></td>
<td><p>Turn on memory diagnostics. Writes to a .mem file in the output directory.</p></td>
</tr>
<tr class="row-even"><td><p>-o:<cite>outdir</cite></p></td>
<td><p>Causes all output files to be written to the directory <cite>outdir</cite> instead of the default directory. The directory is created if necessary.</p></td>
</tr>
<tr class="row-odd"><td><p>-r:<cite>rstfile</cite></p></td>
<td><p>Executes in restart mode, restarting from the data in the file <cite>rstfile</cite>. This file is generated from the output of a previous Truchas simulation using post-processing utilities.</p></td>
</tr>
<tr class="row-even"><td><p>-v:<cite>n</cite></p></td>
<td><p>Sets the verbosity level of terminal output to <cite>n</cite>. The default level is 1. Level 0 produces no output, and level 2 produces somewhat more output than default.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stopping-truchas">
<h2><span class="section-number">1.2. </span>Stopping Truchas<a class="headerlink" href="#stopping-truchas" title="Permalink to this heading"></a></h2>
<p>There are occasions where one would like to gracefully terminate a running
Truchas simulation before it has reached the final simulation time given in
the input file. This is easily done by sending the running process the
<code class="docutils literal notranslate"><span class="pre">SIGUSR2</span></code> signal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kill</span> <span class="o">-</span><span class="n">s</span> <span class="n">SIGUSR2</span> <span class="n">pid</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">pid</span></code> is the process id. When Truchas receives this signal, it
continues until it reaches the end of the current time step, where it writes
the final solution and then exits normally.</p>
</section>
<section id="input-file-format">
<h2><span class="section-number">1.3. </span>Input File Format<a class="headerlink" href="#input-file-format" title="Permalink to this heading"></a></h2>
<p>The Truchas input file is composed of a sequence of Fortran namelist inputs.
Each namelist input has the form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">namelist</span><span class="o">-</span><span class="n">group</span><span class="o">-</span><span class="n">name</span>
   <span class="n">namelist</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="n">body</span>
<span class="o">/</span>
</pre></div>
</div>
<p>The input begins with a line where the first nonblank is the “&amp;” character
immediately followed by the name of the namelist group. The input continues
until the “/” character. The body of the namelist input consists of a
sequence of “<cite>name = value</cite>” pairs, separated by commas or newlines, that
assign values to namelist variables. Namelist input is a feature of Fortran
and a complete description of the syntax can be found in any Fortran reference,
however the basic syntax is very intuitive and a few examples like those in
the following input sample should suffice to explain its essentials.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>This is a comment.  Anything outside a namelist input is ignored.

&amp;MESH
   ! Within a namelist input &quot;!&quot; introduces a comment.
   mesh_file = &quot;my-big-mesh.exo&quot; ! character string value
/

Another comment.

&amp;PHYSICS
   heat_conduction = .true.     ! logical values are .true./.false.
   body_force = 0.0, 0.0, -9.8  ! assigning values to an array
   !This would be an equivalent method ...
   !body_force(1) =  0.0
   !body_force(2) =  0.0
   !body_force(3) = -9.8
/

Newlines in a namelist are optional.

&amp;PHYSICAL_CONSTANTS
   stefan_boltzmann=0.1, absolute_zero=0.0
/
</pre></div>
</div>
<p>The namelists and the variables they contain are described in the following
chapters. A particular namelist will be required or optional, and it may
appear only once or multiple times. Not all variables of a namelist need
to be specified. Some may not be relevant in a given context, and others
may have acceptable default values; only those that are used and need to
be assigned a value need to be specified.</p>
<p>The order of the namelist inputs in the input file is not significant; they
may appear in any order. Any text outside of a namelist input is ignored
and can be regarded as a comment as illustrated in the example.</p>
<p>Fortran is case-insensitive when interpreting the namelist group names and
variable names; they may be written in any mixture of upper and lower case.
However character string <em>values</em>, which are interpreted by Truchas, are
case-sensitive unless documented otherwise. In the event of a namelist input
syntax error, Truchas will report that it was unable to read the namelist
and include what limited information it gets from the namelist parser.
Common syntax errors are misspelt variable names, variables that don’t
belong to the namelist, a blank written in place of an underscore, etc.</p>
</section>
<section id="physical-units">
<span id="physcial-units"></span><h2><span class="section-number">1.4. </span>Physical Units<a class="headerlink" href="#physical-units" title="Permalink to this heading"></a></h2>
<p>Truchas does not require the use any particular system of physical units, nor
does it provide a means for the user to specify the dimension of a numerical
value. The user is simply expected to ensure that all input values are given
using a consistent system of units. To assist in this end, the dimension for
all dimensional quantities is documented using the following abstract units:
mass <span class="math notranslate nohighlight">\(M\)</span>, length <span class="math notranslate nohighlight">\(L\)</span>, time <span class="math notranslate nohighlight">\(T\)</span>, thermodynamic temperature
<span class="math notranslate nohighlight">\(\Theta\)</span>, and electric current <span class="math notranslate nohighlight">\(I\)</span>. Thus mass density, for
example, will be documented as having dimension <span class="math notranslate nohighlight">\(M/L^3\)</span>. The following
derived abstract units are also used: force <span class="math notranslate nohighlight">\(F (= M L/T^2)\)</span> and energy
<span class="math notranslate nohighlight">\(E (= M L^2/T^2)\)</span>.</p>
<p>There are a few physical constants, like the Stefan-Boltzmann constant, that
have predefined values in SI units. These constants are referenced by a few
specific models, and where a model uses one of these constants this fact is
noted. Use the <a class="reference internal" href="../PHYSICAL_CONSTANTS_Namelist/index.html#physical-constants-namelist"><span class="std std-ref">PHYSICAL_CONSTANTS</span></a>
namelist to redefine the value of these constants where necessary.</p>
</section>
<section id="working-with-output-files">
<span id="um-work-with-output"></span><h2><span class="section-number">1.5. </span>Working With Output Files<a class="headerlink" href="#working-with-output-files" title="Permalink to this heading"></a></h2>
<p>As described earlier, Truchas writes its output files to the directory named
in the -o option, or if omitted, to a directory whose name is generated
from the base name of the input file: “myprob_output” if “myprob.inp” is
the input file, for example. Two primary files are written, a .log file
that is a copy of the terminal output, and a .h5 HDF5 file that contains
the simulation results. HDF5 is a widely-used format for storing and
managing data, and thereare a great many freely-available tools for working
with these files. Various additional human-readable text files may also be
written when requested by the input.</p>
<section id="visualization">
<h3>Visualization<a class="headerlink" href="#visualization" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://www.paraview.org">Paraview</a> is the recommended tool for visualizing
the simulation results written to the .h5 file. After opening the file with
paraview, a pop-up window will appear prompting the user to select a reader;
choose the “TRUCHAS Reader” selection.</p>
<p>The legacy visualization software GMV (General Mesh Viewer) may also be used.
Originally developed by LANL, GMV was licensed to CPFD Software, LLC who
assumed its maintenance and commercialized it. Since then they have released
the <a class="reference external" href="https://github.com/CPFDSoftware/gmv">source</a> under the GPLv3 license on
GitHub. Documentation for GMV may be found at <a class="reference external" href="http://www.gmv-barracuda.com/index.html">http://www.gmv-barracuda.com/index.html</a>.
Note that support for GMV is deprecated and may be dropped in the future.
To use GMV, the program write-gmv.py must first be used to create GMV-format
input files from the .h5 file. The command syntax is</p>
<blockquote>
<div><p>write-gmv.py [<cite>options</cite>] <cite>H5FILE</cite></p>
</div></blockquote>
<p>where <cite>H5FILE</cite> is the .h5 output file. Use the option -h to get a full list
of the available options. This will create a collection of files: one for the
mesh and a numbered sequence of files for the solution fields at the output
times.</p>
</section>
<section id="restarts">
<h3>Restarts<a class="headerlink" href="#restarts" title="Permalink to this heading"></a></h3>
<p>The program write-restart.py is used to create Truchas restart files using
data from an .h5 output file. The command syntax is</p>
<blockquote>
<div><p>write-restart.py [<cite>options</cite>] <cite>H5FILE</cite></p>
</div></blockquote>
<p>where <cite>H5FILE</cite> is the .h5 output file and the possible <cite>options</cite> are:</p>
<blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>Display usage help and exit.</p>
</dd>
<dt><kbd><span class="option">-l</span></kbd></dt>
<dd><p>Print a list of the available cycles from which the restart
file can be created. No restart file is written.</p>
</dd>
<dt><kbd><span class="option">-n <var>N</var></span></kbd></dt>
<dd><p>Data from cycle <cite>N</cite> is used to create the restart file;
if not specified, the last cycle is used.</p>
</dd>
<dt><kbd><span class="option">-o <var>FILE</var></span></kbd></dt>
<dd><p>Write restart data to <cite>FILE</cite>. If not specified, <cite>FILE</cite> is
taken to be the <cite>H5FILE</cite> name with its “.h5” suffix replaced
by “.restart.N” where N is the cycle number.</p>
</dd>
<dt><kbd><span class="option">-m <var>FILE</var></span></kbd></dt>
<dd><p>Create a mapped restart file using the specified ExodusII
mesh <cite>FILE</cite> as the target mesh.</p>
</dd>
<dt><kbd><span class="option">-s <var>FLOAT</var></span></kbd></dt>
<dd><p>Scale the mapped restart mesh by the factor <cite>FLOAT</cite>.</p>
</dd>
<dt><kbd><span class="option">--use-portage</span></kbd></dt>
<dd><p>Use the Portage grid mapper backend. Truchas must have
been built with Portage support. The default is Truchas’
built-in Kuprat mapper.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Reference Manual" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ALTMESH_Namelist/index.html" class="btn btn-neutral float-right" title="2. ALTMESH Namelist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, LANL.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>