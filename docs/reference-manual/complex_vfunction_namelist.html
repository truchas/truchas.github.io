

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. COMPLEX_VFUNCTION Namelist &mdash; Truchas Reference Manual 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=93b25530" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>window.MathJax = {"chtml": {"displayAlign": "left", "displayIndent": "2em"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. DIFFUSION Solver Namelist" href="DIFFUSION_Solver_Namelist/index.html" />
    <link rel="prev" title="3. COMPLEX_FUNCTION Namelist" href="complex_function_namelist.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Truchas Reference Manual
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="BODY_Namelist/index.html">2. BODY Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex_function_namelist.html">3. COMPLEX_FUNCTION Namelist</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. COMPLEX_VFUNCTION Namelist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#namelist-variables">4.1. Namelist Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#name">name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type">type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#library-path">library_path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#library-symbol">library_symbol</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dim">dim</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DIFFUSION_Solver_Namelist/index.html">5. DIFFUSION Solver Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="ELECTROMAGNETIC_BC_Namelist/index.html">6. ELECTROMAGNETIC_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="EM_MESH_Namelist/index.html">7. EM_MESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="ENCLOSURE_RADIATION_Namelist/index.html">8. ENCLOSURE_RADIATION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="ENCLOSURE_SURFACE_Namelist/index.html">9. ENCLOSURE_SURFACE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="EVAPORATION_Namelist/index.html">10. EVAPORATION Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="fdme_solver_namelist.html">11. FDME_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="FLOW_Namelist/index.html">12. FLOW Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="FLOW_BC_Namelist/index.html">13. FLOW_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="FLOW_PRESSURE_SOLVER_and_FLOW_VISCOUS_SOLVER_Namelists/index.html">14. FLOW_PRESSURE_SOLVER and FLOW_VISCOUS_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="FUNCTION_Namelist/index.html">15. FUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="induction_heating_namelist.html">16. INDUCTION_HEATING Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="INDUCTION_SOURCE_FIELD_Namelist/index.html">17. INDUCTION_SOURCE_FIELD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="MATERIAL_and_PHASE_Namelists/index.html">18. MATERIAL and PHASE Namelists</a></li>
<li class="toctree-l1"><a class="reference internal" href="MESH_Namelist/index.html">19. MESH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="MICROSTRUCTURE_Namelist/index.html">20. MICROSTRUCTURE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="microwave_heating_namelist.html">21. MICROWAVE_HEATING Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="NUMERICS_Namelist/index.html">22. NUMERICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="OUTPUTS_Namelist/index.html">23. OUTPUTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHASE_CHANGE_Namelist/index.html">24. PHASE_CHANGE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHYSICAL_CONSTANTS_Namelist/index.html">25. PHYSICAL_CONSTANTS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="PHYSICS_Namelist/index.html">26. PHYSICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="PROBE_Namelist/index.html">27. PROBE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTART_Namelist/index.html">28. RESTART Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="SIMULATION_CONTROL_Namelist/index.html">29. SIMULATION_CONTROL Namelist (Experimental)</a></li>
<li class="toctree-l1"><a class="reference internal" href="SOLID_MECHANICS_Namelist/index.html">30. SOLID_MECHANICS Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="SOLID_MECHANICS_BC_Namelist/index.html">31. SOLID_MECHANICS_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPECIES_BC_Namelist/index.html">32. SPECIES_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPECIES_SOURCE_Namelist/index.html">33. SPECIES_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="tdme_joule_solver_namelist.html">34. TDME_JOULE_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="THERMAL_BC_Namelist/index.html">35. THERMAL_BC Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="THERMAL_SOURCE_Namelist/index.html">36. THERMAL_SOURCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="TOOLHEAD_Namelist/index.html">37. TOOLHEAD Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="TOOLPATH_Namelist/index.html">38. TOOLPATH Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="TURBULENCE_Namelist/index.html">39. TURBULENCE Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="VFUNCTION_Namelist/index.html">40. VFUNCTION Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="VISCOPLASTIC_MODEL_Namelist/index.html">41. VISCOPLASTIC_MODEL Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="VISCOPLASTIC_SOLVER_Namelist/index.html">42. VISCOPLASTIC_SOLVER Namelist</a></li>
<li class="toctree-l1"><a class="reference internal" href="rade/index.html">43. Radiation Enclosure Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="python/index.html">44. <code class="docutils literal notranslate"><span class="pre">truchas</span></code> Python Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Truchas Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">4. </span>COMPLEX_VFUNCTION Namelist</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/complex_vfunction_namelist.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="complex-vfunction-namelist">
<span id="id1"></span><h1><span class="section-number">4. </span>COMPLEX_VFUNCTION Namelist<a class="headerlink" href="#complex-vfunction-namelist" title="Link to this heading"></a></h1>
<p>Analogous to the <a class="reference internal" href="VFUNCTION_Namelist/index.html#vfunction-namelist"><span class="std std-ref">VFUNCTION</span></a> namelist, this namelist
is used to define a <em>complex</em> vector-valued function that can be used in some
situations where complex vector-valued data is needed.</p>
<p>These are general complex vector-valued functions of one or more variables,
<span class="math notranslate nohighlight">\(f:\mathbb{R}^m\to\mathbb{C}^n\)</span>. The dimension of the value, the
number of variables, and the unknowns they represent (e.g., time, position,
etc.) depend on the context in which the function is used, and that is
described by the documentation of those namelists where these functions can
be used.</p>
<p>Currently the only type of function that is available is one from a shared
object library having a simple Fortran or C-compatible interface. Written
in Fortran the function interface must look like</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">subroutine </span><span class="n">myfun</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="k">bind</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="kt">complex</span><span class="p">(</span><span class="nb">kind</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">)),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">v</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="n">p</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="kt">complex</span><span class="p">(</span><span class="nb">kind</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">)),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">myfunc</span></code> can, of course, be any name. The equivalent C interface is</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;complex.h&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">myfun</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">v</span><span class="p">[],</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">p</span><span class="p">[],</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="k">complex</span><span class="w"> </span><span class="n">r</span><span class="p">[]);</span>
</pre></div>
</div>
<p>The vector of variables <span class="math notranslate nohighlight">\(v= (v_1,...,v_m)\)</span> is passed in the argument
<code class="docutils literal notranslate"><span class="pre">v</span></code> and a vector of parameter values specified by <a class="reference internal" href="#parameters">parameters</a> is passed
in the argument <code class="docutils literal notranslate"><span class="pre">p</span></code>. The result vector <span class="math notranslate nohighlight">\(r=(r_1,...,r_n)\)</span> of size
<a class="reference internal" href="#dim">dim</a> is returned in the argument <code class="docutils literal notranslate"><span class="pre">r</span></code>. The path to the library is given
by <a class="reference internal" href="#library-path">library_path</a> and the name of the function (“myfun”, e.g.) is given by
<a class="reference internal" href="#library-symbol">library_symbol</a>. Note that the <code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> attribute on the function
declaration inhibits the Fortran compiler from mangling the function name
(by appending an underscore, for example) as it normally would.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="field-list simple">
<dt class="field-odd">Required/Optional<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional</p>
</dd>
<dt class="field-even">Single/Multiple Instances<span class="colon">:</span></dt>
<dd class="field-even"><p>Multiple</p>
</dd>
</dl>
</div>
<section id="namelist-variables">
<h2><span class="section-number">4.1. </span>Namelist Variables<a class="headerlink" href="#namelist-variables" title="Link to this heading"></a></h2>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#name" id="id2">name</a></p></li>
<li><p><a class="reference internal" href="#type" id="id3">type</a></p></li>
<li><p><a class="reference internal" href="#library-path" id="id4">library_path</a></p></li>
<li><p><a class="reference internal" href="#library-symbol" id="id5">library_symbol</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id6">parameters</a></p></li>
<li><p><a class="reference internal" href="#dim" id="id7">dim</a></p></li>
</ul>
</nav>
<section id="name">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">name</a><a class="headerlink" href="#name" title="Link to this heading"></a></h3>
<p>A unique name by which this vector function can be referenced by other
namelists.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>case-sensitive string (31 characters max)</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</section>
<section id="type">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">type</a><a class="headerlink" href="#type" title="Link to this heading"></a></h3>
<p>The type of function defined by the namelist.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>case-sensitive string</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
<dt class="field-odd">Valid values<span class="colon">:</span></dt>
<dd class="field-odd"><p>“library”</p>
</dd>
</dl>
</section>
<section id="library-path">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">library_path</a><a class="headerlink" href="#library-path" title="Link to this heading"></a></h3>
<p>The path to the shared object library that contains the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string of up to 128 characters.</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
</dl>
</section>
<section id="library-symbol">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">library_symbol</a><a class="headerlink" href="#library-symbol" title="Link to this heading"></a></h3>
<p>The symbol name of the function within the shared object file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string of up to 128 characters.</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>none</p>
</dd>
<dt class="field-odd">Notes<span class="colon">:</span></dt>
<dd class="field-odd"><p>Unless the Fortran function is declared with the <code class="docutils literal notranslate"><span class="pre">BIND(C)</span></code> attribute,
which is the recommended practice, a Fortran compiler will almost always
mangle the name of the function so that the symbol name is not quite the
same as the name in the source code. Use the UNIX/Linux command-line utility
<strong>nm</strong> to list the symbol names in the library file to determine the correct
name to use here.</p>
</dd>
</dl>
</section>
<section id="parameters">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">parameters</a><a class="headerlink" href="#parameters" title="Link to this heading"></a></h3>
<p>Optional parameter values to pass to the shared library function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>real vector of up to 16 values</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>No parameters</p>
</dd>
</dl>
</section>
<section id="dim">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">dim</a><a class="headerlink" href="#dim" title="Link to this heading"></a></h3>
<p>Number of components of the return value of the shared library function.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="complex_function_namelist.html" class="btn btn-neutral float-left" title="3. COMPLEX_FUNCTION Namelist" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DIFFUSION_Solver_Namelist/index.html" class="btn btn-neutral float-right" title="5. DIFFUSION Solver Namelist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, The Truchas Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>